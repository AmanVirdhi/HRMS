<div class="main">
  <div class="container-fluid">
    <div class="outerbox" style="margin-top: 4vh;">
      <div class="inner1">
        <div class="heading">
          <div>
            <p class="sub-head"><b>Employee List</b></p>
          </div>
        </div>
      </div>
      <div class="inner2">
        <div class="button-links">
          <mdb-form-control>
            <div class="icon-container">
              <a routerLink="../Empdashboard" matTooltip="Employee Dashboard">
                <div class="icon-square">
                  <i class="fa-solid fa-border-all" style="color: white;"></i>
                </div>
              </a>
              <a routerLink="../Emplist" matTooltip="Employee List">
                <div class="icon-square">
                  <i class="fa-solid fa-list" style="color: white;"></i>
                </div>
              </a>
              <a routerLink="../personal" class="" matTooltip="Add Employee">
                <i style="color:var(--orange-primary);" class="fa-solid fa-circle-plus addEmp"></i>
              </a>
            </div>
          </mdb-form-control>
        </div>
      </div>
    </div>
    <!-- <div class="row" id="input-field">
      <div class="col">
        <mdb-form-control>
          <input mdbInput type="text" id="form8Example1" class="form-control" />
          <label mdbLabel class="form-label" for="form8Example1">Full Name <span class="text-danger">*</span></label>
        </mdb-form-control>
      </div>
      <div class="col">
        <mdb-form-control>
          <select mdbInput id="form8Example3" class="form-control" aria-labelledby="dropdownMenuLink">
            <option value disabled selected hidden></option>
            <option value="1">Project1</option>
            <option value="2">Project2</option>
            <option value="3">Others</option>
          </select>
          <label mdbLabel class="form-label" for="form8Example3">Project <span class="text-danger">*</span></label>
          <i class="fas fa-caret-down" style="position: absolute; top: 50%; transform: translateY(-50%); right: 10px;"></i>
        </mdb-form-control>
      </div>
      <div class="col">
        <mdb-form-control>
          <select mdbInput id="form8Example3" class="form-control" aria-labelledby="dropdownMenuLink">
            <option value disabled selected hidden></option>
            <option value="1">Web Development</option>
            <option value="2">App Development</option>
            <option value="3">Ios Development</option>
          </select>
          <label mdbLabel class="form-label" for="form8Example3">Department <span class="text-danger">*</span></label>
          <i class="fas fa-caret-down" style="position: absolute; top: 50%; transform: translateY(-50%); right: 10px;"></i>
        </mdb-form-control>
      </div>
      <div class="col">
        <mdb-form-control>
          <select mdbInput id="form8Example4" class="form-control" aria-labelledby="dropdownMenuLink">
            <option value disabled selected hidden></option>
            <option value="1">Neeraj</option>
            <option value="2">Sandeep</option>
            <option value="3">Pankaj</option>
          </select>
          <label mdbLabel class="form-label" for="form8Example4">Project Manager <span class="text-danger">*</span></label>
          <i class="fas fa-caret-down" style="position: absolute; top: 50%; transform: translateY(-50%); right: 10px;"></i>
        </mdb-form-control>
      </div>
      <div class="col">
        <div class="filterxy">
          <mat-form-field>
            <mat-label class="filterx">Filter</mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Search Here...." #input>
          </mat-form-field>
        </div>
      </div>
    </div>  -->
    <form [formGroup]="formGroup">
      <div class="row " id="input-field">
        <div class="col">
          <mat-form-field>
            <mat-label>Filter</mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Search Here...." #input>
          </mat-form-field>
        </div>
        <div class="col">
          <mdb-form-control>
            <mat-form-field class="small custom-mat-field" appearance="outline">
              <mat-label>Project </mat-label>
              <mat-select [(value)]="selectedOption" formControlName="project">
                <mat-form-field class="field" appearance="outline">
                  <input type="text" matInput (keyup)="filterOptions($any($event.target).value)" placeholder="Search">
                  <mat-icon matSuffix>search</mat-icon>
                </mat-form-field>
                <mat-option [value]="" disabled selected hidden>Project</mat-option>
                <mat-option *ngFor="let option of filteredProjectOptions" [value]="option.value">
                  {{ option.name }}
                </mat-option>
                <mat-option *ngIf="filteredProjectOptions.length === 0 && options.length > 0">No options
                  found</mat-option>
              </mat-select>
            </mat-form-field>
          </mdb-form-control>
        </div>
        <div class="col">
          <mdb-form-control>
            <mat-form-field class="small custom-mat-field" appearance="outline">
              <mat-label>Department </mat-label>
              <mat-select [(value)]="selectedDepartmentOption" formControlName="department">
                <mat-form-field class="field" appearance="outline">
                  <input type="text" matInput (keyup)="filterDepartmentOptions($any($event.target).value)"
                    placeholder="Search">
                  <mat-icon matSuffix>search</mat-icon>
                </mat-form-field>
                <mat-option [value]="" disabled selected hidden>Department</mat-option>
                <mat-option *ngFor="let option of filteredDepartmentOptions" [value]="option.value">
                  {{ option.name }}
                </mat-option>
                <mat-option *ngIf="filteredDepartmentOptions.length === 0 && optionsDepartment.length > 0">
                  No options found
                </mat-option>
              </mat-select>
            </mat-form-field>
          </mdb-form-control>
        </div>
        <div class="col">
          <mdb-form-control>
            <mat-form-field class="small custom-mat-field" appearance="outline">
              <mat-label>Project Manager </mat-label>
              <mat-select [(value)]="selectedManagerOption" formControlName="manager">
                <mat-form-field class="field" appearance="outline">
                  <input type="text" matInput (keyup)="filterManagerOptions($any($event.target).value)"
                    placeholder="Search">
                  <mat-icon matSuffix>search</mat-icon>
                </mat-form-field>
                <mat-option [value]="" disabled selected hidden>Project Manager</mat-option>
                <mat-option *ngFor="let option of filteredManagerOptions" [value]="option.value">
                  {{ option.name }}
                </mat-option>
                <mat-option *ngIf="filteredManagerOptions.length === 0 && optionsManager.length > 0">
                  No options found
                </mat-option>
              </mat-select>
            </mat-form-field>
          </mdb-form-control>
        </div>
        <div class="col">
          <button type="button" class="btn" id="searchbtn">
            <div class="search" style="display: flex; flex-direction: row;">
              <div><i class="fa-solid fa-magnifying-glass"></i></div>
              <div>&nbsp; &nbsp; Search</div>
            </div>
          </button>
        </div>
      </div>
    </form>
  </div>
  <div class="tablex"
    style="background-color: #ECECEC; width: 100%; overflow: scroll; position: relative;height: 380px; width:93vw; margin-left:10px;">
    <table mat-table [dataSource]="dataSource" matSort>
      <!-- Checkbox Column -->
      <ng-container matColumnDef="select">
        <th mat-header-cell *matHeaderCellDef class="actionheader">
          <mat-checkbox (change)="$event ? toggleAllRows() : null" [checked]="selection.hasValue() && isAllSelected()"
            [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
          </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let row">
          <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
            [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
          </mat-checkbox>
        </td>
      </ng-container>

      <!-- Full Name Column -->
      <ng-container matColumnDef="fullName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="actionheader"> Full Name </th>
        <td mat-cell *matCellDef="let row" class="sticky">
          <a (click)="navigateToProfile(row.id)">{{ row.fullName }}</a>
        </td>
      </ng-container>
      <ng-container matColumnDef="profileImage">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Profile Image</th>
        <td mat-cell *matCellDef="let row" (click)="toggleQuestion(row.profileImage)">
          <ng-container *ngIf="row.profileImage; else defaultImage">
            <img [src]="getImageURL(row.profileImage)" width="50" height="50"
              style="border-radius: 50%; border: 1px solid;" />
          </ng-container>
          <ng-template #defaultImage>
            <img src="../../../../assets/img/profile.png" class="img-fluid" width="50" height="50"
              style="border-radius: 50%; border: 1px solid;">
          </ng-template>
        </td>
      </ng-container>

      <!-- Gender Column -->
      <ng-container matColumnDef="gender">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Gender </th>
        <td mat-cell *matCellDef="let row"> {{ row.gender }} </td>
      </ng-container>

      <!-- Blood Group Column -->
      <ng-container matColumnDef="bloodGroup">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Blood Group </th>
        <td mat-cell *matCellDef="let row"> {{ row.bloodGroup }} </td>
      </ng-container>

      <!-- DOB Column -->
      <ng-container matColumnDef="dob">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> DOB </th>
        <td mat-cell *matCellDef="let row"> {{ row.dob | date: 'mediumDate' }} </td>
      </ng-container>

      <!-- Marital Status Column -->
      <ng-container matColumnDef="maritalStatus">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Marital Status </th>
        <td mat-cell *matCellDef="let row"> {{ row.maritalStatus }} </td>
      </ng-container>

      <!-- Religion Column -->
      <ng-container matColumnDef="reliegion">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Religion </th>
        <td mat-cell *matCellDef="let row"> {{ row.reliegion }} </td>
      </ng-container>

      <!-- Father or Husband Name Column -->
      <ng-container matColumnDef="fatherorHusbandName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Father / Husband Name </th>
        <td mat-cell *matCellDef="let row"> {{ row.fatherorHusbandName }} </td>
      </ng-container>

      <!-- Date of Marriage Column -->
      <ng-container matColumnDef="dateofMarriage">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Date Of Marriage </th>
        <td mat-cell *matCellDef="let row"> {{ row.dateofMarriage | date: 'mediumDate' }} </td>
      </ng-container>

      <!-- Mobile Number Column -->
      <ng-container matColumnDef="mobileNo">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Mobile No </th>
        <td mat-cell *matCellDef="let row"> {{ row.mobileNo }} </td>
      </ng-container>

      <!-- Email Column -->
      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
        <td mat-cell *matCellDef="let row"> {{ row.email }} </td>
      </ng-container>
      <!-- <ng-container matColumnDef="isActive">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Active</th>
        <td mat-cell *matCellDef="let row">
          <span *ngIf="row.isActive" class="badge badge-success">True</span>
          <span *ngIf="!row.isActive" class="badge rounded-pill badge-danger">False</span>
        </td>
      </ng-container> -->
      <ng-container matColumnDef="isActive">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Active</th>
        <td mat-cell *matCellDef="let row">
          <span *ngIf="row.isActive" class="badge badge-success">Active</span>
          <span *ngIf="!row.isActive" class="badge rounded-pill badge-danger">Inactive</span>
        </td>
      </ng-container>


      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      <!-- Row shown when there is no matching data. -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4">No data matching the filter "{{ input.value }}"</td>
      </tr>
    </table>
  </div>
  <mat-paginator [pageSizeOptions]="[6, 10, 25, 100]" aria-label="Select page of users"
    class="pagination"></mat-paginator>

</div>
<!-- popup for profile image -->
<!-- <div *ngIf="showQuestion" class="modal-overlay">
  <div class="modal-dialog " (click)="preventClose($event)" style="position: relative;">
    <button mat-icon-button (click)="closePopup()" style="position: absolute; top:-20px;right: -20px;cursor: pointer;">
      <i class="far fa-times-circle " style="background-color:orange;
      border-radius: 14px;"></i>
    </button>
    <form class="modal-content" style="border: 0px solid green; position: relative; border-radius: 20px;  height:  413px; width: 422px;">
      <button mat-icon-button (click)="closePopup()"
        style="position: absolute; top:-20px;right: -20px;cursor: pointer;z-index: 30;">
        <i class="far fa-times-circle " style="background-color:orange;
        border-radius: 14px;"></i>
      </button>
      <div class="image">
        <img
          style="background-size: cover; background-attachment: fixed; height: 362px; width: 357px; margin-top: 21px;"
          class="img-fluid rounded" [src]="getImageURL(currentModalImgUrl)" />
      </div>
    </form>
  </div>
</div> -->
<div *ngIf="showQuestion" class="modal-overlay">
  <div class="modal-dialog" (click)="preventClose($event)" style="position: relative;">
    <button mat-icon-button (click)="closePopup()"
      style="position: absolute; top:-20px; right: -20px; cursor: pointer;">
      <i class="far fa-times-circle" style="background-color: orange; border-radius: 14px;"></i>
    </button>
    <form class="modal-content"
      style="border: 0px solid green; position: relative; border-radius: 20px; height: 413px; width: 422px;">
      <button mat-icon-button (click)="closePopup()"
        style="position: absolute; top:-20px; right: -20px; cursor: pointer; z-index: 30;">
        <i class="far fa-times-circle" style="background-color: orange; border-radius: 14px;"></i>
      </button>
      <div class="image">
        <ng-container *ngIf="currentModalImgUrl; else defaultModalImage">
          <img
            style="background-size: cover; background-attachment: fixed; height: 362px; width: 357px; margin-top: 21px;"
            class="img-fluid rounded" [src]="getImageURL(currentModalImgUrl)" />
        </ng-container>
        <ng-template #defaultModalImage>
          <img src="../../../../assets/img/profile.png" class="img-fluid rounded"
            style="background-size: cover; background-attachment: fixed; height: 362px; width: 357px; margin-top: 21px;" />
        </ng-template>
      </div>
    </form>
  </div>
</div>